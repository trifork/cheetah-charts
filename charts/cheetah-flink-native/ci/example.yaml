image:
  repository: flink
  tag: 1.16

imagePullSecrets:
  - name: pullsecret

ingress:
  enabled: true
  certType: staging

monitoring:
  enabled: true

podTemplate:
  spec:
    containers:
      - name: flink-main-container
        securityContext:
          allowPrivilegeEscalation: true
      - name: sleepybox
        securityContext:
          allowPrivilegeEscalation: false
          runAsGroup: 1001
          runAsUser: 1001
          capabilities:
            drop:
              - ALL
        image: bitnami/bitnami-shell:latest
        command:
          - /bin/sh
          - -c
          - while sleep 2; do echo "zzz"; done

securityContext:
  allowPrivilegeEscalation: false
  runAsUser: 9999
  runAsGroup: 9999
  capabilities:
    drop:
      - ALL

podSecurityContext:
  runAsNonRoot: true
  fsGroup: 9999
  seccompProfile:
    type: RuntimeDefault

flink:
  savepoints:
    enabled: true

  checkpoints:
    enabled: true

  job:
    jarURI: local:///opt/flink/examples/streaming/StateMachineExample.jar
    args: []
  flinkProperties:
    taskmanager.numberOfTaskSlots: 2
